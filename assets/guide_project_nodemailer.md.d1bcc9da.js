import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.793cb3e4.js";const A=JSON.parse('{"title":"é¡¹ç›®","titleTemplate":"é‚®ä»¶","description":"","frontmatter":{"title":"é¡¹ç›®","titleTemplate":"é‚®ä»¶"},"headers":[],"relativePath":"guide/project/nodemailer.md","lastUpdated":1722860580000}'),p={name:"guide/project/nodemailer.md"},o=l(`<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€ {#å‰è¨€}&quot;">â€‹</a></h2><p><strong>ä¸»é¢˜</strong>ï¼š æœ¬æ–‡åŸºäºnuxt3 + nodemailer å®ç°é‚®ä»¶å‘é€çš„åŠŸèƒ½</p><p><strong>å†…å®¹</strong>ï¼šæœ¬æ–‡åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šé¦–å…ˆæ˜¯æ’ä»¶ä»‹ç»ï¼Œç„¶åæ˜¯ä»£ç å®ç°ï¼Œæœ€åæ˜¯æ³¨æ„äº‹é¡¹</p><p><strong>ç›®çš„</strong>ï¼šæ‰‹æ¨¡æ‰‹ å®ç°ä¸€ä¸ªå‘é€é‚®ä»¶åŠŸèƒ½</p><hr><h2 id="ç¯å¢ƒå‡†å¤‡ï¼š" tabindex="-1">ç¯å¢ƒå‡†å¤‡ï¼š <a class="header-anchor" href="#ç¯å¢ƒå‡†å¤‡ï¼š" aria-label="Permalink to &quot;ç¯å¢ƒå‡†å¤‡ï¼š {#ç¯å¢ƒå‡†å¤‡ï¼š}&quot;">â€‹</a></h2><p><strong>æ¡†æ¶</strong>ï¼šåŸºäº nuxt3 æ­å»ºçš„SSR é¡¹ç›® å¯¹äºnuxt3é¡¹ç›®æ­å»ºå¯ä»¥å‚è€ƒ <a href="https://juejin.cn/post/7204471695544336439" target="_blank" rel="noreferrer">SSR-Nuxt3é¡¹ç›®æ­å»º</a></p><p><strong>æ’ä»¶</strong>ï¼š <a href="https://www.npmjs.com/package/nodemailer" target="_blank" rel="noreferrer">nodemailer</a></p><p><strong>node</strong>ï¼š14.18.1 [nodeç‰ˆæœ¬åº”è¯¥æ²¡æœ‰æœ‰è¦æ±‚]</p><h2 id="ä¸€ã€ä»‹ç»åŠä½¿ç”¨" tabindex="-1">ä¸€ã€ä»‹ç»åŠä½¿ç”¨ <a class="header-anchor" href="#ä¸€ã€ä»‹ç»åŠä½¿ç”¨" aria-label="Permalink to &quot;ä¸€ã€ä»‹ç»åŠä½¿ç”¨ {#ä¸€ã€ä»‹ç»åŠä½¿ç”¨}&quot;">â€‹</a></h2><h4 id="_1-nodemailer" tabindex="-1">1. nodemailer <a class="header-anchor" href="#_1-nodemailer" aria-label="Permalink to &quot;1. nodemailer&quot;">â€‹</a></h4><p><strong>Nodemailer</strong>æ˜¯ä¸€ä¸ªæµè¡Œçš„Node.jsæ¨¡å—ï¼Œç”¨äºå‘é€ç”µå­é‚®ä»¶ã€‚å®ƒå¯ä»¥å‘é€åŒ…å«HTMLï¼Œæ–‡æœ¬å’Œé™„ä»¶çš„é‚®ä»¶ï¼Œå¹¶æ”¯æŒå¤šç§åè®®ï¼Œå¦‚SMTPã€SMTPSã€Sendmailã€Amazon SESã€å’Œå…¶ä»–ä¼ è¾“åè®®ã€‚Nodemailerè¿˜æä¾›äº†è®¸å¤šåŠŸèƒ½ï¼Œä¾‹å¦‚å‘é€å®šæ—¶é‚®ä»¶ã€SMTPè®¤è¯ã€SSLå’ŒTLSæ”¯æŒã€è‡ªå®šä¹‰å¤´å’Œé‚®ä»¶æ¨¡æ¿ç­‰ã€‚</p><h4 id="_2-nuxt3" tabindex="-1">2. nuxt3 <a class="header-anchor" href="#_2-nuxt3" aria-label="Permalink to &quot;2. nuxt3&quot;">â€‹</a></h4><p><strong>Nuxt3</strong>æ˜¯ä¸€ä¸ªåŸºäºVue.jså®ç°çš„æœåŠ¡ç«¯æ¸²æŸ“æ¡†æ¶ã€‚å…¶æä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼šè·¯ç”±ï¼Œä¸­é—´ä»¶ï¼Œæ’ä»¶ï¼Œè‡ªå®šä¹‰hook,çŠ¶æ€ç®¡é‡Œç­‰ç­‰ã€‚å®ƒæ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ï¼Œé™æ€ç”Ÿæˆï¼ˆSSGï¼‰ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰ã€‚å®ƒéƒ½é‡‡ç”¨çº¦å®šå¼çš„æ–‡ä»¶å‘½åæ–¹å¼æ¥å¼€å‘ï¼Œå¦‚è·¯ç”±åªéœ€è¦å†™åœ¨pagesä¸‹çš„é»˜è®¤å½“ç„¶é¡µé¢ï¼ŒåµŒå¥—çº§ä¸ºäºŒçº§é¡µé¢ï¼Œ å½“æˆ‘ä»¬æ²¡æœ‰å†™pagesçš„æ—¶å€™ï¼Œé»˜è®¤ä¸ä¼šå¼•å…¥Router, è¿˜æœ‰ é¡µé¢ä¸­ä½¿ç”¨çš„vue æ–¹æ³•åƒ reactiveï¼Œref,watch è¿™äº›å…¨éƒ½ä¸éœ€è¦å¼•å…¥ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><h4 id="_3-server" tabindex="-1">3. server <a class="header-anchor" href="#_3-server" aria-label="Permalink to &quot;3. server&quot;">â€‹</a></h4><p><strong>server</strong> å±‚ä¹Ÿå°±æ˜¯node å±‚ï¼Œæ‰€è°“çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼šåœ¨æœåŠ¡ç«¯åš<strong>åˆå§‹åŒ–è¯·æ±‚</strong>ã€ HTMLé¡µé¢æ„å»ºæ¸²æŸ“ï¼Œå†è¿”å›ç»™å‰ç«¯ï¼Œå¦‚æœå¯¹é¦–å±æ¸²æŸ“æ—¶é—´ã€æˆ–è€…SEOæœ‰è¾ƒé«˜è¦æ±‚ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“æ˜¯ä¸ªä¸äºŒä¹‹é€‰ã€‚å› ä¸ºåƒVue ã€React å‰ç«¯æ¡†æ¶æ­å»ºçš„ SPA é¡¹ç›®å®ƒæ˜¯å•é¡µåº”ç”¨ï¼Œå°±æ˜¯åªæœ‰ä¸€ä¸ªHTMLï¼Œå¹¶ä¸”ä¼šæŠŠé¡µé¢ã€ç»„ä»¶éƒ½æŒ‚è½½åœ¨ä¸€ä¸ªdivä¸Šï¼Œé¦–å±çš„æ—¶å€™ä¼šåšå¾ˆå¤šé¡µé¢åˆå§‹åŒ–è¯·æ±‚ã€æ„å»ºé¡µé¢ï¼Œæ‰€ä»¥å°±ä¼šå¾ˆæ…¢ã€‚</p><p><strong>nuxt</strong>é¡¹ç›®ä¸­ï¼šæˆ‘ä»¬åªéœ€è¦åˆ›å»ºserveræ–‡ä»¶å¤¹ï¼Œå°±å¯ä»¥åœ¨ä¸Šé¢åšä¸€äº›nodeèƒ½çš„äº‹æƒ…æ¯”å¦‚è¯·æ±‚è½¬å‘ã€æ‹¦æˆªã€ä¿®æ”¹ï¼Œæ—¶æ•ˆæ€§ä¸é«˜çš„æ¥å£æ•°æ®è¿›è¡Œç¼“å­˜ã€å­˜redisã€è¿˜æœ‰é‰´æƒå‘€ç­‰ç­‰ã€‚æœ¬æ–‡ä¸»è¦æ˜¯ ä½¿ç”¨node å»å®ç°ä¸€ä¸‹é‚®ä»¶çš„å‘é€ã€‚</p><p>å¹ä¸ä¸‹å»äº†ï¼Œä¸Šèœä¸ŠèœğŸ‘»</p><h2 id="äºŒã€é‚®ä»¶åŠŸèƒ½å®ç°" tabindex="-1">äºŒã€é‚®ä»¶åŠŸèƒ½å®ç° <a class="header-anchor" href="#äºŒã€é‚®ä»¶åŠŸèƒ½å®ç°" aria-label="Permalink to &quot;äºŒã€é‚®ä»¶åŠŸèƒ½å®ç° {#äºŒã€é‚®ä»¶åŠŸèƒ½å®ç°}&quot;">â€‹</a></h2><h4 id="_1-å®‰è£…" tabindex="-1">1. å®‰è£…: <a class="header-anchor" href="#_1-å®‰è£…" aria-label="Permalink to &quot;1. å®‰è£…:&quot;">â€‹</a></h4><p><strong>nuxt3</strong> æ­å»ºé¡¹ç›®æˆ‘è¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œå‚è€ƒï¼š <a href="https://juejin.cn/post/7204471695544336439" target="_blank" rel="noreferrer">SSR-Nuxt3é¡¹ç›®æ­å»º</a> é¡¹ç›®ç›®å½•å¦‚ä¸‹</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41bbc3b3b1784361bd4b026139225fbf~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p><strong>nodemailer</strong></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">yarn add nodemailer</span></span>
<span class="line"><span style="color:#A6ACCD;">or</span></span>
<span class="line"><span style="color:#A6ACCD;">npm i nodemailer</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-ä»£ç ç¼–å†™" tabindex="-1">2. ä»£ç ç¼–å†™ <a class="header-anchor" href="#_2-ä»£ç ç¼–å†™" aria-label="Permalink to &quot;2. ä»£ç ç¼–å†™&quot;">â€‹</a></h4><p>æ–°å»º server/api/sendEmail.ts</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> nodemailer </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">nodemailer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineEventHandler</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">params</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">readBody</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">context</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// è®€å–åƒæ•¸</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">transporter</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">nodemailer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTransport</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        host</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">smtp.qq.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        port</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">465</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// SMTP ç«¯å£</span></span>
<span class="line"><span style="color:#F07178;">        secure</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ SSL</span></span>
<span class="line"><span style="color:#F07178;">        secureConnection</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ SSL</span></span>
<span class="line"><span style="color:#F07178;">        auth</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            user</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxxx@qq.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            pass</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xxxxhqvfqdwsupvbdiaj</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// è¿™æ˜¯é‚®ç®±å»ç”³è¯·çš„å¼€å¯æœåŠ¡çš„å¯†ç ï¼ŒPOP3/IMAP/SMTP/Exchange/CardDAV/CalDAVæœåŠ¡</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">mailOptions</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        from</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2xxxx@qq.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å‘ä»¶åœ°å€</span></span>
<span class="line"><span style="color:#F07178;">        to</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xxxx@qq.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ”¶ä»¶åˆ—è¡¨</span></span>
<span class="line"><span style="color:#F07178;">        subject</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hollo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ ‡é¢˜</span></span>
<span class="line"><span style="color:#F07178;">        html</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;b&gt;Hello world ?&lt;/b&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// html å†…å®¹</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">mailOptions</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">html</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getHtml</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">params</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">resp</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">resObj</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        code</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        msg</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        data</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            messageId</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å¼€å§‹å‘é€é‚®ä»¶</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">resp</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">transporter</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sendMail</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">mailOptions</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æŠ¥é”™äº†</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">resObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">code</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">10001</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">resObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Submit Fail !</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">finally</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å‘é€å®Œæˆ</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">resp</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">resp</span><span style="color:#89DDFF;">?.</span><span style="color:#A6ACCD;">messageId</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">resObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Submit Success !</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">resObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">messageId</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">resp</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">messageId</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">resObj</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ„å»ºå‘é€çš„é‚®ä»¶å†…å®¹</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getHtml</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">params</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">object</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">html</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">keys</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">params</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">formNames</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">å§“å</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">email</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">é‚®ç®±</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">messenger</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">å…¬å¸</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">messengerAct</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æ‰‹æœº</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">txt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ç•™è¨€</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">k</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">params</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">html</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">&lt;p style=&quot;line-height: 48px;color: #666666;border-bottom: 1px solid #dddddd;&quot;&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">                        &lt;span style=&quot;color: #333333; width: 100px;&quot;&gt;</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">formNames[k]</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">ï¼š&lt;/span&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">                        </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">params[k]</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C3E88D;">                    &lt;/p&gt;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">html</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>å®šä¹‰å®Œå°±å¯ä»¥å»é¡µé¢ä¸­ä½¿ç”¨å•¦</p><p>pages/test.vue</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">&lt;</span><span style="color:#FFCB6B;">template</span><span style="color:#A6ACCD;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">Â  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">h1 </span><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">submit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">ç™¼é€éƒµä»¶</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">script setup lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">Â  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useFetch</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/api/sendEmail</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">Â  Â  method</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">Â  Â  params</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">Â  Â  Â  name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">å°æ˜“</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">Â  Â  Â  job</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">å‰ç«¯</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">Â  Â  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">Â  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">Â  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h4 id="_3-æµ‹è¯•ä¸€ä¸‹" tabindex="-1">3. æµ‹è¯•ä¸€ä¸‹ <a class="header-anchor" href="#_3-æµ‹è¯•ä¸€ä¸‹" aria-label="Permalink to &quot;3. æµ‹è¯•ä¸€ä¸‹&quot;">â€‹</a></h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a9d6abd6d921409cb75a26891afc66bb~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>æ­å–œä½  å¤§åŠŸå‘Šæˆ ğŸ˜ğŸ˜</p><h2 id="æºç ï¼š" tabindex="-1">æºç ï¼š <a class="header-anchor" href="#æºç ï¼š" aria-label="Permalink to &quot;æºç ï¼š {#æºç ï¼š}&quot;">â€‹</a></h2><p><a href="https://github.com/xiaoyi1255/nuxt3-temple" target="_blank" rel="noreferrer">https://github.com/xiaoyi1255/nuxt3-temple</a></p><p>æ„Ÿå…´è¶£æœ‹å‹ä»¬å¯ä»¥è¯•ä¸€è¯•å“¦ï¼Œè§‰å¾—éº»çƒ¦çš„å¯ä»¥å§ ï¼Œè´¦å·ä¿¡æ¯çš„é…ç½® æåˆ°ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸­</p><h2 id="æ³¨æ„äº‹é¡¹" tabindex="-1">æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;æ³¨æ„äº‹é¡¹ {#æ³¨æ„äº‹é¡¹}&quot;">â€‹</a></h2><ul><li>æ³¨æ„ SMTP æœåŠ¡å™¨åœ°å€ã€ç«¯å£ã€è®¤è¯æ–¹å¼ã€ç”¨æˆ·åå’Œå¯†ç ï¼ˆå»é‚®ç®±ç”³è¯·å¼€å¯æœåŠ¡ï¼‰ç­‰</li><li>æ³¨æ„å‘ä»¶é‚®ç®±éœ€è¦å’Œauth é‚®ç®±ä¸€è‡´</li><li>æ³¨æ„é‚®ä»¶çš„ä¸»é¢˜ã€å†…å®¹ã€é™„ä»¶ç­‰ä¿¡æ¯çš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ï¼Œå°½å¯èƒ½æé«˜é‚®ä»¶çš„é€è¾¾ç‡å’Œç¨³å®šæ€§ã€‚</li><li>æ„é˜²æ­¢é‚®ä»¶æ»¥å‘ã€åƒåœ¾é‚®ä»¶ç­‰é—®é¢˜</li></ul>`,38),e=[o];function t(r,c,F,y,D,i){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{A as __pageData,u as default};
