## 引言
我们知道，http是无状态协议，这也就意味着，我们在登录页面完成了登录，转身调其它接口，服务器是不知道用户是否完成登录的。
当然你要说调其它接口的时候，把账号密码也带上！！也不是不行，就是容易泄漏密码，加重服务器压力，其次是容易挨揍。

后端：喂，你天天要我查数据库，密码这个密码那个，我的QPS都快炸了。   
前端：呃，这可怎么办？   
大佬：来，来，我有个绝招，给你颁发通行证！每次调用接口，出示通行证就好，QPS也别愁了！   
前端：通行证里要包什么信息？需要加密吗？   
后端：哪有这么多废话，通行证都包办了，你就负责拿来用就好，保密工作都我来操心。   
前端：好的，听你的。  


## Session-Cookie机制和Token机制 ?
百度百科: 
- Token在计算机身份认证中是令牌（临时）的意思.
- Cookie类型为“小型文本文件”，是某些网站为了辨别用户身份，进行Session跟踪而储存在用户本地终端上的数据（通常经过加密），由用户客户端计算机暂时或永久保存的信息。

### Session-Cookie认证流程：
1. 客户端账号密码进行登录
2. 服务器验证通过后，创建Session对象，并存入该用户相关信息
3. 服务器返回Session对象的唯一标识sessionid, 并写入Cookie
4. 客户端同源下的其它请求主动携带Cookie
5. 服务器收到请求携带的Cookie, 再去验证

弊端：
- 受同源策略约束。无法直接在子应用中共享
- 分布式集群情况下无法保证用户的会话数据是一致的

显然：Session-Cookie不是最优解。所以就引入了Token

### Token 认证流程
1. 客户端账号密码登录
2. 服务器验证通过后，通过jwt鉴权生成Token
3. 客户端进行Token存储，之后每次请求都携带（一般放请求头上）
4. 服务端校验是否过期、有效

优势：
- 它只是客户端与服务端的一种自定义约定，和同源策略没有关系
- 不受分布式集群影响
- 不需要服务器维护会话状态
- 可以在不同系统中共享

弊端：Token有效期很长不安全。很短会存在用户刷着刷着，告诉他Token过期需要重新登录。当然这种情况我们是不允许出现的。所以就有了**无感刷新Token**






